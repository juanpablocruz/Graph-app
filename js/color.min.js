var Color=function(a,b){if(a.match(/#/g)){this.hex=a;this.rgb=this.hexToRgb(a);this.XYZ=this.RGBtoXYZ(this.rgb);this.lab=this.XYZtoLAB(this.XYZ);this.cmyk=this.rgbToCMYK(this.rgb);this.hsv=this.rgbToHSV(this.rgb);this.hsl=this.rgbToHsl(this.rgb);}else{switch(b){case"rgb":this.rgb=this.rgbToRGB(a);this.hex=this.rgbToHex(this.rgb);this.XYZ=this.RGBtoXYZ(this.rgb);this.lab=this.XYZtoLAB(this.XYZ);this.cmyk=this.rgbToCMYK(this.rgb);this.hsv=this.rgbToHSV(this.rgb);this.hsl=this.rgbToHsl(this.rgb);break;case"cmyk":this.cmyk=this.cmykToCMYK(a);this.rgb=this.cmykToRGB(this.cmyk);this.hex=this.rgbToHex(this.rgb);this.XYZ=this.RGBtoXYZ(this.rgb);this.lab=this.XYZtoLAB(this.XYZ);this.hsv=this.rgbToHSV(this.rgb);this.hsl=this.rgbToHsl(this.rgb);break;case"lab":this.lab=this.labToLAB(a);this.XYZ=this.labToXYZ(this.lab);this.rgb=this.xyzToRGB(this.XYZ);this.hex=this.rgbToHex(this.rgb);this.cmyk=this.rgbToCMYK(this.rgb);this.hsv=this.rgbToHSV(this.rgb);this.hsl=this.rgbToHsl(this.rgb);break;case"hsv":this.hsv=this.hsvToHSV(a);this.rgb=this.hsvToRGB(this.hsv);this.hex=this.rgbToHex(this.rgb);this.XYZ=this.RGBtoXYZ(this.rgb);this.lab=this.XYZtoLAB(this.XYZ);this.cmyk=this.rgbToCMYK(this.rgb);this.hsl=this.rgbToHsl(this.rgb);break;case"hsl":this.hsl=this.hslToHSL(a);this.rgb=this.hslToRGB(this.hsl);this.hsv=this.rgbToHSV(this.rgb);this.hex=this.rgbToHex(this.rgb);this.XYZ=this.RGBtoXYZ(this.rgb);this.lab=this.XYZtoLAB(this.XYZ);this.cmyk=this.rgbToCMYK(this.rgb);break;}}};Color.prototype.rgbToRGB=function(f){var g=f.replace("(","");g=g.replace(")","");var d=g.split(",");var e=parseInt(d[0]);var b=parseInt(d[1]);var a=parseInt(d[2]);return{r:e,g:b,b:a};};Color.prototype.cmykToCMYK=function(e){var g=e.replace("(","");g=g.replace(")","");var d=g.split(",");var g=parseFloat(d[0]);var a=parseFloat(d[1]);var f=parseFloat(d[2]);var b=parseFloat(d[3]);return{c:g,m:a,y:f,k:b};};Color.prototype.hsvToHSV=function(f){var g=f.replace("(","");g=g.replace(")","");var e=g.split(",");var d=parseFloat(e[0]);var b=parseFloat(e[1]);var a=parseFloat(e[2]);return{h:d,s:b,v:a};};Color.prototype.hslToHSL=function(f){var g=f.replace("(","");g=g.replace(")","");var e=g.split(",");var d=parseFloat(e[0]);var b=parseFloat(e[1]);var a=parseFloat(e[2]);if(d<0){d=365+d;}if(b<0){b=0;}if(a<0){a=0;}if(d>=360){d=359;}if(b>100){b=100;}if(a>100){a=100;}b/=100;a/=100;return{h:d,s:b,l:a};};Color.prototype.labToLAB=function(h){var j=h.replace("(","");j=j.replace(")","");var g=j.split(",");var f=parseInt(g[0]);var e=parseInt(g[1]);var d=parseInt(g[2]);return{l:f,a:e,b:d};};Color.prototype.rgbToHex=function(a){var b=a.r*65536+a.g*256+a.b;b=b.toString(16,6);len=b.length;if(len<6){for(i=0;i<6-len;i++){b="0"+b;}}return"#"+b;};Color.prototype.hexToRgb=function(b){var a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(b);return a?{r:parseInt(a[1],16),g:parseInt(a[2],16),b:parseInt(a[3],16)}:null;};Color.prototype.RGBtoXYZ=function(a){var_R=parseFloat(a.r/255);var_G=parseFloat(a.g/255);var_B=parseFloat(a.b/255);if(var_R>0.04045){var_R=Math.pow(((var_R+0.055)/1.055),2.4);}else{var_R=var_R/12.92;}if(var_G>0.04045){var_G=Math.pow(((var_G+0.055)/1.055),2.4);}else{var_G=var_G/12.92;}if(var_B>0.04045){var_B=Math.pow(((var_B+0.055)/1.055),2.4);}else{var_B=var_B/12.92;}var_R=var_R*100;var_G=var_G*100;var_B=var_B*100;X=Math.round(var_R*0.4124+var_G*0.3576+var_B*0.1805);Y=Math.round(var_R*0.2126+var_G*0.7152+var_B*0.0722);Z=Math.round(var_R*0.0193+var_G*0.1192+var_B*0.9505);return{x:X,y:Y,z:Z};};Color.prototype.XYZtoLAB=function(d){var c=95.047;var b=100;var a=108.883;var_X=d.x/c;var_Y=d.y/b;var_Z=d.z/a;if(var_X>0.008856){var_X=Math.pow(var_X,(1/3));}else{var_X=(7.787*var_X)+(16/116);}if(var_Y>0.008856){var_Y=Math.pow(var_Y,(1/3));}else{var_Y=(7.787*var_Y)+(16/116);}if(var_Z>0.008856){var_Z=Math.pow(var_Z,(1/3));}else{var_Z=(7.787*var_Z)+(16/116);}CIE_L=Math.round((116*var_Y)-16);CIE_a=Math.round(500*(var_X-var_Y));CIE_b=Math.round(200*(var_Y-var_Z));return{l:CIE_L,a:CIE_a,b:CIE_b};};Color.prototype.rgbToCMYK=function(d){var c=0;var k=0;var e=0;var l=0;var a=d.r;var h=d.g;var j=d.b;if(a==null||h==null||j==null||isNaN(a)||isNaN(h)||isNaN(j)){return;}if(a<0||h<0||j<0||a>255||h>255||j>255){return;}if(a==0&&h==0&&j==0){l=1;return[0,0,0,1];}c=1-(a/255);k=1-(h/255);e=1-(j/255);var f=Math.min(c,Math.min(k,e));c=(c-f)/(1-f);k=(k-f)/(1-f);e=(e-f)/(1-f);l=f;return{c:c,m:k,y:e,k:l};};Color.prototype.cmykToRGB=function(c){var e=(c.c*(1-c.k)+c.k);var g=(c.m*(1-c.k)+c.k);var d=(c.y*(1-c.k)+c.k);var b=Math.round((1-e)*255);var a=Math.round((1-g)*255);var f=Math.round((1-d)*255);return{r:b,g:a,b:f};};Color.prototype.rgbToHSV=function(e){var a=e.r;var k=e.g;var o=e.b;var c=0;var l=0;var f=0;if(a==null||k==null||o==null||isNaN(a)||isNaN(k)||isNaN(o)){return;}a=a/255;k=k/255;o=o/255;var p=Math.min(a,Math.min(k,o));var q=Math.max(a,Math.max(k,o));if(p==q){f=p;return{h:0,s:0,v:f};}var n=(a==p)?k-o:((o==p)?a-k:o-a);var j=(a==p)?3:((o==p)?1:5);c=60*(j-n/(q-p));l=(q-p)/q;f=q;return{h:c,s:l,v:f};};Color.prototype.hsvToRGB=function(a){var d=a.h;var c=a.s;var b=a.v;if(c==0){R=b*255;G=b*255;B=b*255;}else{var_h=d*6;if(var_h==6){var_h=0;}var_i=parseInt(var_h);var_1=b*(1-c);var_2=b*(1-c*(var_h-var_i));var_3=b*(1-c*(1-(var_h-var_i)));if(var_i==0){var_r=b;var_g=var_3;var_b=var_1;}else{if(var_i==1){var_r=var_2;var_g=b;var_b=var_1;}else{if(var_i==2){var_r=var_1;var_g=b;var_b=var_3;}else{if(var_i==3){var_r=var_1;var_g=var_2;var_b=b;}else{if(var_i==4){var_r=var_3;var_g=var_1;var_b=b;}else{var_r=b;var_g=var_1;var_b=var_2;}}}}}R=Math.round(var_r*255);G=Math.round(var_g*255);B=Math.round(var_b*255);}return{r:R,g:G,b:B};};Color.prototype.xyzToRGB=function(d){var c=d.x;var b=d.y;var a=d.z;var_X=c/100;var_Y=b/100;var_Z=a/100;var_R=var_X*3.2406+var_Y*-1.5372+var_Z*-0.4986;var_G=var_X*-0.9689+var_Y*1.8758+var_Z*0.0415;var_B=var_X*0.0557+var_Y*-0.204+var_Z*1.057;if(var_R>0.0031308){var_R=1.055*(Math.pow(var_R,(1/2.4)))-0.055;}else{var_R=12.92*var_R;}if(var_G>0.0031308){var_G=1.055*(Math.pow(var_G,(1/2.4)))-0.055;}else{var_G=12.92*var_G;}if(var_B>0.0031308){var_B=1.055*(Math.pow(var_B,(1/2.4)))-0.055;}else{var_B=12.92*var_B;}R=Math.round(var_R*255);G=Math.round(var_G*255);B=Math.round(var_B*255);return{r:R,g:G,b:B};};Color.prototype.labToXYZ=function(a){var_Y=(a.l+16)/116;var_X=a.a/500+var_Y;var_Z=var_Y-a.b/200;var d=95.047;var c=100;var b=108.883;if(Math.pow(var_Y,3)>0.008856){var_Y=Math.pow(var_Y,3);}else{var_Y=(var_Y-16/116)/7.787;}if(Math.pow(var_X,3)>0.008856){var_X=Math.pow(var_X,3);}else{var_X=(var_X-16/116)/7.787;}if(Math.pow(var_Z,3)>0.008856){var_Z=Math.pow(var_Z,3);}else{var_Z=(var_Z-16/116)/7.787;}X=Math.round(d*var_X);Y=Math.round(c*var_Y);Z=Math.round(b*var_Z);return{x:X,y:Y,z:Z};};Color.prototype.rgbToHsl=function(n){var a=n.r;var j=n.g;var o=n.b;a/=255,j/=255,o/=255;var p=Math.max(a,j,o),e=Math.min(a,j,o);var f,q,c=(p+e)/2;if(p==e){f=q=0;}else{var k=p-e;q=c>0.5?k/(2-p-e):k/(p+e);switch(p){case a:f=(j-o)/k+(j<o?6:0);break;case j:f=(o-a)/k+2;break;case o:f=(a-j)/k+4;break;}f/=6;}return{h:f,s:q,l:c};};function hue2rgb(c,b,a){if(a<0){a+=1;}if(a>1){a-=1;}if(a<1/6){return c+(b-c)*6*a;}if(a<1/2){return b;}if(a<2/3){return c+(b-c)*(2/3-a)*6;}return c;}Color.prototype.hslToRGB=function(d){var k,j,a;var f=d.s,e=d.h,c=d.l;C=(1-Math.abs(2*c-1))*f;hh=e/60;X=C*(1-Math.abs(hh%2-1));k=j=a=0;if(hh>=0&&hh<1){k=C;j=X;}else{if(hh>=1&&hh<2){k=X;j=C;}else{if(hh>=2&&hh<3){j=C;a=X;}else{if(hh>=3&&hh<4){j=X;a=C;}else{if(hh>=4&&hh<5){k=X;a=C;}else{k=C;a=X;}}}}}m=c-C/2;k+=m;j+=m;a+=m;k*=255;j*=255;a*=255;k=Math.floor(k);j=Math.floor(j);a=Math.floor(a);return{r:k,g:j,b:a};};
